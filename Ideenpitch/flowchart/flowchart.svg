<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1420" viewBox="0 0 1000 1420">
  <defs>
    <style>
      .title{font:700 24px Arial,Helvetica,sans-serif; fill:#0f172a}
      .sub{font:400 13px Arial,Helvetica,sans-serif; fill:#334155}
      .box{fill:#ffffff; stroke:#0f172a; stroke-width:2.5; rx:12; ry:12}
      .boxStart{fill:#dcfce7; stroke:#16a34a; stroke-width:2.5; rx:12; ry:12}
      .boxScene{fill:#dbeafe; stroke:#2563eb; stroke-width:2.5; rx:12; ry:12}
      .boxControl{fill:#e9d5ff; stroke:#9333ea; stroke-width:2.5; rx:12; ry:12}
      .boxEffect{fill:#fecdd3; stroke:#e11d48; stroke-width:2.5; rx:12; ry:12}
      .boxGiveIn{fill:#fed7aa; stroke:#ea580c; stroke-width:2.5; rx:12; ry:12}
      .boxRefocus{fill:#bae6fd; stroke:#0284c7; stroke-width:2.5; rx:12; ry:12}
      .boxExit{fill:#d1fae5; stroke:#059669; stroke-width:2.5; rx:12; ry:12}
      .decision{fill:#fff7ed; stroke:#ea580c; stroke-width:2.5}
      .text{font:600 15px Arial,Helvetica,sans-serif; fill:#0f172a}
      .small{font:400 13px Arial,Helvetica,sans-serif; fill:#0f172a}
      .muted{font:400 12px Arial,Helvetica,sans-serif; fill:#475569}
      .arrow{stroke:#0f172a; stroke-width:2.5; fill:none}
      .loopArrow{stroke:#7c3aed; stroke-width:2.5; fill:none; stroke-dasharray:8 4}
      .label{font:700 13px Arial,Helvetica,sans-serif; fill:#0f172a}
      .labelMuted{font:600 12px Arial,Helvetica,sans-serif; fill:#7c3aed}
    </style>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#0f172a"/>
    </marker>
    <marker id="loopArrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#7c3aed"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#0b1220" flood-opacity="0.15"/>
    </filter>
  </defs>

  <rect x="0" y="0" width="1000" height="1420" fill="#f8fafc"/>

  <text x="500" y="45" text-anchor="middle" class="title">Flowchart – DeSync (ADHS in VR)</text>
  <text x="500" y="68" text-anchor="middle" class="sub">Landingpage → Szenenauswahl → VR/Desktop → ADHS-Steuerung → Loops → Exit</text>

  <!-- 1. START -->
  <rect x="350" y="110" width="300" height="80" class="boxStart" filter="url(#shadow)"/>
  <text x="500" y="145" text-anchor="middle" class="text">Landingpage</text>
  <text x="500" y="168" text-anchor="middle" class="muted">landingpage.html · Info-Modal optional</text>
  <path d="M 500 190 L 500 230" class="arrow" marker-end="url(#arrow)"/>

  <!-- 2. DECISION: Info -->
  <polygon points="500,230 600,270 500,310 400,270" class="decision" filter="url(#shadow)"/>
  <text x="500" y="268" text-anchor="middle" class="text">Info öffnen?</text>
  <text x="500" y="288" text-anchor="middle" class="muted">"Mehr zur Simulation"</text>

  <!-- Info modal (side branch) -->
  <rect x="680" y="235" width="240" height="70" class="box" filter="url(#shadow)"/>
  <text x="800" y="265" text-anchor="middle" class="small">Info-Modal lesen</text>
  <text x="800" y="285" text-anchor="middle" class="muted">→ schließen</text>
  <path d="M 600 270 L 680 270" class="arrow" marker-end="url(#arrow)"/>
  <text x="640" y="263" class="label">Ja</text>
  <path d="M 800 305 L 800 330 L 500 330" class="arrow" marker-end="url(#arrow)"/>

  <path d="M 500 310 L 500 330" class="arrow" marker-end="url(#arrow)"/>
  <text x="515" y="320" class="label">Nein</text>

  <!-- 3. Environment choice -->
  <rect x="350" y="330" width="300" height="85" class="boxScene" filter="url(#shadow)"/>
  <text x="500" y="365" text-anchor="middle" class="text">Umgebung wählen</text>
  <text x="500" y="388" text-anchor="middle" class="muted">Hörsaal / Desk / Supermarkt</text>
  <path d="M 500 415 L 500 455" class="arrow" marker-end="url(#arrow)"/>

  <!-- 4. Scene load -->
  <rect x="350" y="455" width="300" height="95" class="boxScene" filter="url(#shadow)"/>
  <text x="500" y="490" text-anchor="middle" class="text">Szene lädt</text>
  <text x="500" y="512" text-anchor="middle" class="small">A-Frame Scene + DOM-Overlay</text>
  <text x="500" y="532" text-anchor="middle" class="muted">app.js initialisiert</text>
  <path d="M 500 550 L 500 590" class="arrow" marker-end="url(#arrow)"/>

  <!-- 5. VR Decision -->
  <polygon points="500,590 600,635 500,680 400,635" class="decision" filter="url(#shadow)"/>
  <text x="500" y="633" text-anchor="middle" class="text">VR starten?</text>
  <text x="500" y="653" text-anchor="middle" class="muted">Button "Start VR"</text>

  <!-- Desktop path (left) -->
  <rect x="120" y="705" width="180" height="70" class="box" filter="url(#shadow)"/>
  <text x="210" y="735" text-anchor="middle" class="text">Desktop-Modus</text>
  <text x="210" y="755" text-anchor="middle" class="muted">Browser</text>
  <path d="M 400 635 L 210 635 L 210 705" class="arrow" marker-end="url(#arrow)"/>
  <text x="305" y="625" class="label">Nein</text>

  <!-- VR path (right) -->
  <rect x="700" y="705" width="180" height="70" class="box" filter="url(#shadow)"/>
  <text x="790" y="735" text-anchor="middle" class="text">VR-Modus</text>
  <text x="790" y="755" text-anchor="middle" class="muted">WebXR aktiv</text>
  <path d="M 600 635 L 790 635 L 790 705" class="arrow" marker-end="url(#arrow)"/>
  <text x="695" y="625" class="label">Ja</text>

  <!-- 6. Converge to interaction -->
  <path d="M 210 775 L 210 820 L 350 820" class="arrow" marker-end="url(#arrow)"/>
  <path d="M 790 775 L 790 820 L 650 820" class="arrow" marker-end="url(#arrow)"/>

  <rect x="350" y="820" width="300" height="80" class="boxScene" filter="url(#shadow)"/>
  <text x="500" y="853" text-anchor="middle" class="text">Interaktion in der Szene</text>
  <text x="500" y="876" text-anchor="middle" class="muted">umschauen / bewegen / erkunden</text>
  <path d="M 500 900 L 500 940" class="arrow" marker-end="url(#arrow)"/>

  <!-- 7. ADHS controls -->
  <rect x="350" y="940" width="300" height="95" class="boxControl" filter="url(#shadow)"/>
  <text x="500" y="975" text-anchor="middle" class="text">ADHS Simulation steuern</text>
  <text x="500" y="997" text-anchor="middle" class="small">+/- Intensität, O an/aus</text>
  <text x="500" y="1017" text-anchor="middle" class="small">G Nachgeben, R Refocus</text>
  <path d="M 500 1035 L 500 1075" class="arrow" marker-end="url(#arrow)"/>

  <!-- 8. Effects -->
  <rect x="350" y="1075" width="300" height="95" class="boxEffect" filter="url(#shadow)"/>
  <text x="500" y="1110" text-anchor="middle" class="text">Ablenkungen wirken</text>
  <text x="500" y="1132" text-anchor="middle" class="small">visuell, auditiv, Benachrichtigungen</text>
  <text x="500" y="1152" text-anchor="middle" class="muted">Stress / Zeitgefühl / Wiedereinstieg</text>
  <path d="M 500 1170 L 500 1210" class="arrow" marker-end="url(#arrow)"/>

  <!-- 9. User reaction decision -->
  <polygon points="500,1210 600,1255 500,1300 400,1255" class="decision" filter="url(#shadow)"/>
  <text x="500" y="1253" text-anchor="middle" class="text">Reaktion?</text>
  <text x="500" y="1273" text-anchor="middle" class="muted">G / R / weiter</text>

  <!-- Give in (left loop) -->
  <rect x="70" y="1215" width="180" height="70" class="boxGiveIn" filter="url(#shadow)"/>
  <text x="160" y="1245" text-anchor="middle" class="text">Nachgeben (G)</text>
  <text x="160" y="1265" text-anchor="middle" class="muted">Stress steigt</text>
  <path d="M 400 1255 L 250 1255" class="arrow" marker-end="url(#arrow)"/>
  <text x="325" y="1245" class="label">G</text>
  <path d="M 160 1215 L 160 1122 L 350 1122" class="loopArrow" marker-end="url(#loopArrow)"/>
  <text x="180" y="1175" class="labelMuted">zurück</text>

  <!-- Refocus (right loop) -->
  <rect x="750" y="1215" width="180" height="70" class="boxRefocus" filter="url(#shadow)"/>
  <text x="840" y="1245" text-anchor="middle" class="text">Refocus (R)</text>
  <text x="840" y="1265" text-anchor="middle" class="muted">Fokus stabilisiert</text>
  <path d="M 600 1255 L 750 1255" class="arrow" marker-end="url(#arrow)"/>
  <text x="675" y="1245" class="label">R</text>
  <path d="M 840 1215 L 840 1122 L 650 1122" class="loopArrow" marker-end="url(#loopArrow)"/>
  <text x="810" y="1175" class="labelMuted">zurück</text>

  <!-- 10. Exit path -->
  <path d="M 500 1300 L 500 1340" class="arrow" marker-end="url(#arrow)"/>
  <rect x="350" y="1340" width="300" height="60" class="boxExit" filter="url(#shadow)"/>
  <text x="500" y="1375" text-anchor="middle" class="text">Zurück / Beenden</text>
</svg>
